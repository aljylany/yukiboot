"""
ردود الصلاحيات المهينة والتحقير
Permission Denial Responses - Insulting and Degrading Messages
"""

import random
from config.hierarchy import MASTERS, AdminLevel, get_user_admin_level

# ردود مهينة للأعضاء العاديين الذين يحاولون الوصول لأوامر الأسياد
MEMBER_TO_MASTER_RESPONSES = [
    "😂 **هههههه!** يا حبيبي انت مين عشان تطلب كده؟\n👑 دي أوامر الأسياد مش لعبة أطفال زيك!",
    "🤡 **يا مهرج!** فاكر نفسك سيد؟\n💩 روح العب في الشارع واسيبنا في حالنا!",
    "🐕 **اقعد في مكانك يا كلب!**\nالأسياد لهم أوامرهم وانت مالكش دعوة!",
    "😤 **يا متخلف!** مين قالك تتدخل في شغل كبار؟\n🚫 امشي من هنا قبل ما نطردك!",
    "🤮 **قرفتنا بجهلك!**\n👑 دي أوامر الملوك.. وانت مجرد تراب تحت جزمتهم!",
    "💸 **يا فقير!** حتى لو معاك فلوس مش هتوصل لمستوى الأسياد!\n🗑️ مكانك الزبالة!",
    "🦶 **اطلع برة يا واطي!**\nالأسياد ما يتكلموش مع الحشرات زيك!"
]

# ردود مهينة للأعضاء العاديين الذين يحاولون الوصول لأوامر المشرفين
MEMBER_TO_MODERATOR_RESPONSES = [
    "🤏 **يا صغير!** دي أوامر المشرفين مش لعبتك!\n📚 روح اتعلم الأول!",
    "😂 **مسكين!** فاكر نفسك مشرف؟\n🎭 انت مجرد كومبارس في المسرحية دي!",
    "🐣 **يا فرخة!** لسه صغير على الكلام الكبير ده!\n👶 ارجع للحضانة!",
    "🤦‍♂️ **يا غبي!** المشرفين اشتغلوا عشان يوصلوا لكده\n🦥 وانت كسول حتى تفكر!",
    "🚮 **يا زباله!** حتى المشرفين أحسن منك بألف مرة!\n💀 موتك أحسن!",
    "🍼 **يا رضيع!** سيب أوامر الكبار واشرب لبنك!"
]

# ردود مهينة للأعضاء العاديين الذين يحاولون الوصول لأوامر مالكي المجموعات  
MEMBER_TO_OWNER_RESPONSES = [
    "🏠 **يا بلا بيت!** دي أوامر مالكين المجموعات!\n🚪 اطلع من المجموعة أحسن!",
    "👑 **يا عبد!** المالكين هنا والعبيد برة!\n⛓️ مكانك القيود!",
    "💰 **يا معدم!** المالكين عندهم فلوس وانت عندك إيه؟\n🍞 كسرة عيش!",
    "🏰 **يا متسول!** دي أوامر أصحاب القلاع!\n🗑️ مكانك جنب الزبالة!",
    "👨‍💼 **يا عامل نضافة!** المالكين بيديروا وانت بتكنس!\n🧹 خد المقشة واشتغل!"
]

# ردود مهينة للمشرفين الذين يحاولون الوصول لأوامر الأسياد
MODERATOR_TO_MASTER_RESPONSES = [
    "👮‍♂️ **أيها المشرف المغرور!**\n👑 الأسياد فوق مستواك بسنوات ضوئية!",
    "🎖️ **رتبتك الحقيرة** ما تخليكش تتكلم مع الأسياد!\n🐜 انت مجرد نملة!",
    "😤 **يا مشرف فاشل!** اعرف مكانك ومتتطاولش!\n⬇️ انزل تحت!",
    "🤡 **مشرف بالاسم بس!** الأسياد الحقيقيين هنا!\n🎪 روح السيرك!",
    "💩 **رتبة زباله!** حتى لو مشرف انت فضلت تحت!\n👑 الأسياد فوق الجميع!"
]

# ردود مهينة للمشرفين الذين يحاولون الوصول لأوامر مالكي المجموعات
MODERATOR_TO_OWNER_RESPONSES = [
    "👮‍♂️ **أيها المشرف الحقير!** المالكين أعلى منك!\n🏠 دي مجموعتهم مش مجموعتك!",
    "🎖️ **رتبتك ما تساوي حاجة** قدام المالكين!\n💰 هما اللي عندهم الفلوس والقوة!",
    "🤦‍♂️ **مشرف غبي!** المالكين بيديروا وانت بتنفذ!\n🐕 زي الكلب الطيع!",
    "😂 **يا مضحك!** فاكر رتبة المشرف هتخليك مالك؟\n🎭 انت مهرج!"
]

# ردود مهينة لمالكي المجموعات الذين يحاولون الوصول لأوامر الأسياد
OWNER_TO_MASTER_RESPONSES = [
    "👑 **يا مالك متوهم!** الأسياد فوق الجميع حتى فوقك!\n🐜 انت نملة في عيونهم!",
    "🏠 **مالك مجموعة بس!** الأسياد مالكين كل شيء!\n🌍 هما أسياد العالم!",
    "💰 **فلوسك ما تساوي حاجة** قدام قوة الأسياد!\n⚡ هما أقوى من كل شيء!",
    "😤 **يا مالك حقير!** اعرف مكانك ومتتطاولش!\n👑 الأسياد الحقيقيين هنا!",
    "🤡 **مالك بالاسم بس!** الأسياد هما الحكام الحقيقيين!\n🎪 روح اتسلى في مكان تاني!"
]

def get_permission_denial_response(user_id: int, group_id: int, attempted_level: AdminLevel) -> str:
    """
    الحصول على رد مهين بناءً على مستوى المستخدم والأمر المحاول الوصول إليه
    
    Args:
        user_id: معرف المستخدم
        group_id: معرف المجموعة  
        attempted_level: المستوى المطلوب للأمر
    
    Returns:
        رد مهين مناسب
    """
    # الحصول على مستوى المستخدم الحالي
    user_level = get_user_admin_level(user_id, group_id)
    
    # إذا كان المستخدم سيد، لا نرد عليه برد مهين
    if user_id in MASTERS:
        return None
    
    # اختيار الردود حسب مستوى المستخدم والمستوى المطلوب
    if attempted_level == AdminLevel.MASTER:
        if user_level == AdminLevel.MEMBER:
            return random.choice(MEMBER_TO_MASTER_RESPONSES)
        elif user_level == AdminLevel.MODERATOR:
            return random.choice(MODERATOR_TO_MASTER_RESPONSES)
        elif user_level == AdminLevel.GROUP_OWNER:
            return random.choice(OWNER_TO_MASTER_RESPONSES)
            
    elif attempted_level == AdminLevel.GROUP_OWNER:
        if user_level == AdminLevel.MEMBER:
            return random.choice(MEMBER_TO_OWNER_RESPONSES)
        elif user_level == AdminLevel.MODERATOR:
            return random.choice(MODERATOR_TO_OWNER_RESPONSES)
            
    elif attempted_level == AdminLevel.MODERATOR:
        if user_level == AdminLevel.MEMBER:
            return random.choice(MEMBER_TO_MODERATOR_RESPONSES)
    
    # رد افتراضي
    return "❌ **ليس لديك صلاحية لهذا الأمر!**\n🚫 اعرف مكانك!"

def is_master_command(text: str) -> bool:
    """فحص إذا كان النص يحتوي على أمر من أوامر الأسياد"""
    master_commands = [
        'يوكي قم بإعادة التشغيل', 'يوكي اعد التشغيل', 'restart bot',
        'يوكي قم بإيقاف التشغيل', 'يوكي اوقف البوت', 'shutdown bot',
        'يوكي قم بالتدمير الذاتي', 'يوكي دمر المجموعة', 'self destruct',
        'يوكي قم بمغادرة المجموعة', 'يوكي اخرج', 'يوكي غادر',
        'يوكي رقي مالك مجموعة', 'رقية مالك',
        'يوكي نزل مالك المجموعة', 'تنزيل مالك',
        'اضف فلوس', 'أضف فلوس', 'add money'
    ]
    text_lower = text.lower().strip()
    return any(cmd in text_lower for cmd in master_commands)

def is_owner_command(text: str) -> bool:
    """فحص إذا كان النص يحتوي على أمر من أوامر مالكي المجموعات"""
    owner_commands = [
        'ترقية مشرف', 'تنزيل مشرف', 'رفع مشرف', 'تنزيل مشرف', 'رقي مشرف', 'نزل مشرف',
        'مسح الرتب', 'قائمة المشرفين', 'إعدادات المجموعة', 'رفع مدير', 'رفع ادمن',
        'تنزيل مدير', 'تنزيل ادمن', 'رفع منشئ', 'رفع مالك'
    ]
    text_lower = text.lower().strip()
    return any(cmd in text_lower for cmd in owner_commands)

def is_moderator_command(text: str) -> bool:
    """فحص إذا كان النص يحتوي على أمر من أوامر المشرفين"""
    moderator_commands = [
        'حظر', 'طرد', 'كتم', 'تحذير', 'مسح', 'تنظيف',
        'قفل', 'فتح', 'تفعيل', 'تعطيل', 'الغاء حظر', 'إلغاء حظر', 
        'الغاء كتم', 'إلغاء كتم', 'المحظورين', 'المكتومين', 'الاعدادات'
    ]
    text_lower = text.lower().strip()
    return any(cmd in text_lower for cmd in moderator_commands)